$size-limit: 15;
$order-limit: (from: -10, to: 25);
$breakpoints: (none: 0, tiny: 400px, small: 550px, medium: 700px, large: 960px);
$colours: (tiny: red, small: green, medium: blue, large: yellow);

$order-list: null;

.patchwork {
  display: flex;
  max-width: 960px;
  flex-direction: row;
  border: 1px solid green;
}

*[data-patchwork] {
  flex: 1;
}

@media all and (max-width: map-get($breakpoints, small)) {

  .patchwork {
    flex-direction: column;
  }

}

@mixin column-styles($label) {

  .patchwork {
    background-color: map-get($colours, $label) !important;
  }

  @for $index from 0 through $size-limit {

    *[data-patchwork*="#{$label}-size: #{$index}"] {
      flex: $index;
    }

  }

  @for $index from map-get($order-limit, from) through map-get($order-limit, to) {

    *[data-patchwork*="#{$label}-order: #{$index}"] {
      order: $index
    }

  }

}

@mixin columns {

  $labels-list: tiny small medium large;
  $previous-label: none;

  @each $label in $labels-list {

    @if $label == large {

      @media all and (min-width: map-get($breakpoints, $previous-label)) {
        @include column-styles($label);
      }

    } @else {

      @media all and (min-width: map-get($breakpoints, $previous-label)) and (max-width: map-get($breakpoints, $label)) {
        @include column-styles($label);
      }

    }

    $previous-label: $label;

  }

}

@include columns;